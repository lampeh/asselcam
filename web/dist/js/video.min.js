/*! heads/master-0-ge623d1e-dirty */
"use strict";/*!
 * videojs-playlists - Playlists done right for Videojs
 * v0.1.1
 * 
 * copyright Antonio Laguna 2013
 * MIT License
*/
function playList(a,b){var c=this;c.pl=c.pl||{};var d=parseInt(a,10);return c.pl._guessVideoType=function(a){var b={webm:"video/webm",mp4:"video/mp4",ogv:"video/ogg"},c=a.split(".").pop();return b[c]||""},c.pl.init=function(a,b){b=b||{},c.pl.videos=[],c.pl.current=0,c.on("ended",c.pl._videoEnd),b.getVideoSource&&(c.pl.getVideoSource=b.getVideoSource),c.pl._addVideos(a)},c.pl._updatePoster=function(a){c.poster(a),c.removeChild(c.posterImage),c.posterImage=c.addChild("posterImage")},c.pl._addVideos=function(a){for(var b=0,d=a.length;b<d;b++){for(var e=[],f=0,g=a[b].src.length;f<g;f++)e.push({type:c.pl._guessVideoType(a[b].src[f]),src:a[b].src[f]});a[b].src=e,c.pl.videos.push(a[b])}},c.pl._nextPrev=function(a){var b,d;if("next"===a?(b=c.pl.videos.length-1,d=1):(b=0,d=-1),c.pl.current!==b){var e=c.pl.current+d;c.pl._setVideo(e),c.trigger(a,[c.pl.videos[e]])}},c.pl._setVideo=function(a){a<c.pl.videos.length&&(c.pl.current=a,c.pl.currentVideo=c.pl.videos[a],c.paused()||c.pl._resumeVideo(),c.pl.getVideoSource?c.pl.getVideoSource(c.pl.videos[a],function(a,b){c.pl._setVideoSource(a,b)}):c.pl._setVideoSource(c.pl.videos[a].src,c.pl.videos[a].poster))},c.pl._setVideoSource=function(a,b){c.src(a),c.pl._updatePoster(b)},c.pl._resumeVideo=function(){c.one("loadstart",function(){c.play()})},c.pl._videoEnd=function(){c.pl.current===c.pl.videos.length-1?c.trigger("lastVideoEnded"):(c.pl._resumeVideo(),c.next())},a instanceof Array?(c.pl.init(a,b),c.pl._setVideo(0),c):d===d?(c.pl._setVideo(d),c):"string"==typeof a&&"undefined"!=typeof c.pl[a]?(c.pl[a].apply(c),c):void 0}videojs.Player.prototype.next=function(){return this.pl._nextPrev("next"),this},videojs.Player.prototype.prev=function(){return this.pl._nextPrev("prev"),this},videojs.plugin("playList",playList);var disqus_shortname="asseln",disqus_identifier="tl-all";jQuery(function(a){var b=a("<video/>").attr({width:"auto",height:"auto",poster:"/img/bottich_poster.jpg",preload:"metadata",controls:""}).addClass("video-js vjs-default-skin vjs-big-play-centered")[0];a("#player").html(b),videojs(b,{controlBar:{volumeControl:!1,muteToggle:!1},playbackRates:[.25,.5,.75,1,1.5,2]},function(){function b(b){a.getJSON("//videos.asseln.attraktor.org/videos.json",function(d){if(d.length){var h=a("<ul/>").addClass("nav nav-pills nav-stacked");a.each(d,function(b,c){h.append(a("<li/>").html(a("<a/>").text(c.title).attr("href",g+"?v="+c.title)).attr({id:"video-"+b,"data-video-selector":c.title,"data-video-src":c.src[0]}))}),a("#playlist").empty(),k=-1,e.playList(d),k=d.length-1,a("#playlist").html(h);var i=k;if(b){var j=a("[data-video-selector='"+CSS.escape(b)+"']");j.length&&(i=j.index())}var l=0,m=location.hash.replace(/^#t=([0-9]+)m.*/,"$1"),n=location.hash.replace(/^#t=([0-9]+m)?([0-9.]+)s.*/,"$2");a.isNumeric(m)&&(l+=60*m),a.isNumeric(n)&&(l+=1*n),l&&e.one("loadedmetadata",function(){i===e.pl.current&&(e.currentTime(l),e.play())}),e.playList(i),c(),a.isNumeric(f.rate)&&e.playbackRate(f.rate)}})}function c(){l.removeClass("active"),l=a("#video-"+e.pl.current).addClass("active"),j.href=l.data("video-src"),h.href=i.innerHTML=d();var b=l.position().top-a("#playlist").position().top-a("#listbox").height()/2+l.height()/2;a("#listbox").animate({scrollTop:b},200)}function d(){if(!l||!l.length)return g;var a=e.currentTime(),b=e.playbackRate();return g+"?v="+l.data("video-selector")+(1!=b?"&rate="+b:"")+(a?"#t="+Math.floor(a/60)+"m"+Math.floor(a%60)+"s":"")}var e=this,f=function(a){if(""==a)return{};for(var b={},c=0;c<a.length;++c){var d=a[c].split("=",2);1==d.length?b[d[0]]="":b[d[0]]=decodeURIComponent(d[1].replace(/\+/g," "))}return b}(window.location.search.substr(1).split("&")),g=document.location.origin+document.location.pathname,h=a("#link_href")[0],i=a("#link_text")[0],j=a("#download_href")[0],k=-1,l=a();e.on("next",c),e.on("prev",c),e.setInterval(function(){h.href=i.innerHTML=d()},500),a("[data-action=next]").on("click",function(){e.next()}),a("[data-action=prev]").on("click",function(){e.prev()}),a("[data-action=first]").on("click",function(){e.playList(0),c()}),a("[data-action=last]").on("click",function(){k>=0&&(e.playList(k),c())}),a("#playlist").on("click","li",function(b){b.preventDefault(),e.playList(a(this).index()),c()}),b((""+f.v).replace(/[^0-9-]*/g,""))})});