/*
 * videojs-playlists - Playlists done right for Videojs
 * v0.1.1
 * 
 * copyright Antonio Laguna 2013
 * MIT License
*/
function playList(c,a){var d=this;d.pl=d.pl||{};var b=parseInt(c,10);d.pl._guessVideoType=function(e){var f={webm:"video/webm",mp4:"video/mp4",ogv:"video/ogg"};var g=e.split(".").pop();return f[g]||""};d.pl.init=function(f,e){e=e||{};d.pl.videos=[];d.pl.current=0;d.on("ended",d.pl._videoEnd);if(e.getVideoSource){d.pl.getVideoSource=e.getVideoSource}d.pl._addVideos(f)};d.pl._updatePoster=function(e){d.poster(e);d.removeChild(d.posterImage);d.posterImage=d.addChild("posterImage")};d.pl._addVideos=function(k){for(var h=0,l=k.length;h<l;h++){var f=[];for(var g=0,e=k[h].src.length;g<e;g++){f.push({type:d.pl._guessVideoType(k[h].src[g]),src:k[h].src[g]})}k[h].src=f;d.pl.videos.push(k[h])}};d.pl._nextPrev=function(g){var h,f;if(g==="next"){h=d.pl.videos.length-1;f=1}else{h=0;f=-1}if(d.pl.current!==h){var e=d.pl.current+f;d.pl._setVideo(e);d.trigger(g,[d.pl.videos[e]])}};d.pl._setVideo=function(e){if(e<d.pl.videos.length){d.pl.current=e;d.pl.currentVideo=d.pl.videos[e];if(!d.paused()){d.pl._resumeVideo()}if(d.pl.getVideoSource){d.pl.getVideoSource(d.pl.videos[e],function(f,g){d.pl._setVideoSource(f,g)})}else{d.pl._setVideoSource(d.pl.videos[e].src,d.pl.videos[e].poster)}}};d.pl._setVideoSource=function(e,f){d.src(e);d.pl._updatePoster(f)};d.pl._resumeVideo=function(){d.one("loadstart",function(){d.play()})};d.pl._videoEnd=function(){if(d.pl.current===d.pl.videos.length-1){d.trigger("lastVideoEnded")}else{d.pl._resumeVideo();d.next()}};if(c instanceof Array){d.pl.init(c,a);d.pl._setVideo(0);return d}else{if(b===b){d.pl._setVideo(b);return d}else{if(typeof c==="string"&&typeof d.pl[c]!=="undefined"){d.pl[c].apply(d);return d}}}}videojs.Player.prototype.next=function(){this.pl._nextPrev("next");return this};videojs.Player.prototype.prev=function(){this.pl._nextPrev("prev");return this};videojs.plugin("playList",playList);